/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
export const __webpack_id__ = "vendors-node_modules_electric-sql_pglite_dist_fs_opfs-ahp_js";
export const __webpack_ids__ = ["vendors-node_modules_electric-sql_pglite_dist_fs_opfs-ahp_js"];
export const __webpack_modules__ = {

/***/ "./node_modules/@electric-sql/pglite/dist/fs/opfs-ahp.js":
/*!***************************************************************!*\
  !*** ./node_modules/@electric-sql/pglite/dist/fs/opfs-ahp.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpfsAhpFS: () => (/* binding */ L)\n/* harmony export */ });\n/* harmony import */ var _chunk_WGR4JCLS_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-WGR4JCLS.js */ \"./node_modules/@electric-sql/pglite/dist/chunk-WGR4JCLS.js\");\n/* harmony import */ var _chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../chunk-BTBUZ646.js */ \"./node_modules/@electric-sql/pglite/dist/chunk-BTBUZ646.js\");\n\n\n(0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.j)();\nvar $ = \"state.txt\",\n  G = \"data\",\n  T = {\n    DIR: 16384,\n    FILE: 32768\n  },\n  H,\n  v,\n  F,\n  M,\n  y,\n  b,\n  m,\n  x,\n  P,\n  D,\n  S,\n  n,\n  C,\n  O,\n  k,\n  w,\n  f,\n  I,\n  W,\n  j,\n  L = class extends _chunk_WGR4JCLS_js__WEBPACK_IMPORTED_MODULE_0__.f {\n    constructor(e, {\n      initialPoolSize: t = 1e3,\n      maintainedPoolSize: o = 100,\n      debug: i = !1\n    } = {}) {\n      super(e, {\n        debug: i\n      });\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, n);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, H);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, v);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, F);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, M);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, y);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, b, new Map());\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, m, new Map());\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, x, 0);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, P, new Map());\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, D, new Map());\n      this.lastCheckpoint = 0;\n      this.checkpointInterval = 1e3 * 60;\n      this.poolCounter = 0;\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.f)(this, S, new Set());\n      this.initialPoolSize = t, this.maintainedPoolSize = o;\n    }\n    async init(e, t) {\n      return await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, C).call(this), super.init(e, t);\n    }\n    async syncToFs(e = !1) {\n      await this.maybeCheckpointState(), await this.maintainPool(), e || this.flush();\n    }\n    async closeFs() {\n      for (let e of (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).values()) e.close();\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).flush(), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).close(), this.pg.Module.FS.quit();\n    }\n    async maintainPool(e) {\n      e = e || this.maintainedPoolSize;\n      let t = e - this.state.pool.length,\n        o = [];\n      for (let i = 0; i < t; i++) o.push(new Promise(async c => {\n        ++this.poolCounter;\n        let a = `${(Date.now() - 1704063600).toString(16).padStart(8, \"0\")}-${this.poolCounter.toString(16).padStart(8, \"0\")}`,\n          h = await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, F).getFileHandle(a, {\n            create: !0\n          }),\n          d = await h.createSyncAccessHandle();\n        (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).set(a, h), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).set(a, d), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, k).call(this, {\n          opp: \"createPoolFile\",\n          args: [a]\n        }), this.state.pool.push(a), c();\n      }));\n      for (let i = 0; i > t; i--) o.push(new Promise(async c => {\n        let a = this.state.pool.pop();\n        (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, k).call(this, {\n          opp: \"deletePoolFile\",\n          args: [a]\n        });\n        let h = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).get(a);\n        (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(a)?.close(), await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, F).removeEntry(h.name), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).delete(a), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).delete(a), c();\n      }));\n      await Promise.all(o);\n    }\n    _createPoolFileState(e) {\n      this.state.pool.push(e);\n    }\n    _deletePoolFileState(e) {\n      let t = this.state.pool.indexOf(e);\n      t > -1 && this.state.pool.splice(t, 1);\n    }\n    async maybeCheckpointState() {\n      Date.now() - this.lastCheckpoint > this.checkpointInterval && (await this.checkpointState());\n    }\n    async checkpointState() {\n      let e = new TextEncoder().encode(JSON.stringify(this.state));\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).truncate(0), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).write(e, {\n        at: 0\n      }), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).flush(), this.lastCheckpoint = Date.now();\n    }\n    flush() {\n      for (let e of (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S)) try {\n        e.flush();\n      } catch {}\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).clear();\n    }\n    chmod(e, t) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"chmod\",\n        args: [e, t]\n      }, () => {\n        this._chmodState(e, t);\n      });\n    }\n    _chmodState(e, t) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e);\n      o.mode = t;\n    }\n    close(e) {\n      let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, I).call(this, e);\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, P).delete(e), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, D).delete(t);\n    }\n    fstat(e) {\n      let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, I).call(this, e);\n      return this.lstat(t);\n    }\n    lstat(e) {\n      let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e),\n        o = t.type === \"file\" ? (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(t.backingFilename).getSize() : 0,\n        i = 4096;\n      return {\n        dev: 0,\n        ino: 0,\n        mode: t.mode,\n        nlink: 1,\n        uid: 0,\n        gid: 0,\n        rdev: 0,\n        size: o,\n        blksize: i,\n        blocks: Math.ceil(o / i),\n        atime: t.lastModified,\n        mtime: t.lastModified,\n        ctime: t.lastModified\n      };\n    }\n    mkdir(e, t) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"mkdir\",\n        args: [e, t]\n      }, () => {\n        this._mkdirState(e, t);\n      });\n    }\n    _mkdirState(e, t) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        i = o.pop(),\n        c = [],\n        a = this.state.root;\n      for (let d of o) {\n        if (c.push(e), !Object.prototype.hasOwnProperty.call(a.children, d)) if (t?.recursive) this.mkdir(c.join(\"/\"));else throw new p(\"ENOENT\", \"No such file or directory\");\n        if (a.children[d].type !== \"directory\") throw new p(\"ENOTDIR\", \"Not a directory\");\n        a = a.children[d];\n      }\n      if (Object.prototype.hasOwnProperty.call(a.children, i)) throw new p(\"EEXIST\", \"File exists\");\n      let h = {\n        type: \"directory\",\n        lastModified: Date.now(),\n        mode: t?.mode || T.DIR,\n        children: {}\n      };\n      a.children[i] = h;\n    }\n    open(e, t, o) {\n      if ((0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e).type !== \"file\") throw new p(\"EISDIR\", \"Is a directory\");\n      let c = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, W).call(this);\n      return (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, P).set(c, e), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, D).set(e, c), c;\n    }\n    readdir(e) {\n      let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e);\n      if (t.type !== \"directory\") throw new p(\"ENOTDIR\", \"Not a directory\");\n      return Object.keys(t.children);\n    }\n    read(e, t, o, i, c) {\n      let a = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, I).call(this, e),\n        h = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, a);\n      if (h.type !== \"file\") throw new p(\"EISDIR\", \"Is a directory\");\n      return (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(h.backingFilename).read(new Uint8Array(t.buffer, o, i), {\n        at: c\n      });\n    }\n    rename(e, t) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"rename\",\n        args: [e, t]\n      }, () => {\n        this._renameState(e, t, !0);\n      });\n    }\n    _renameState(e, t, o = !1) {\n      let i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        c = i.pop(),\n        a = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, i.join(\"/\"));\n      if (!Object.prototype.hasOwnProperty.call(a.children, c)) throw new p(\"ENOENT\", \"No such file or directory\");\n      let h = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, t),\n        d = h.pop(),\n        l = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, h.join(\"/\"));\n      if (o && Object.prototype.hasOwnProperty.call(l.children, d)) {\n        let u = l.children[d];\n        (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(u.backingFilename).truncate(0), this.state.pool.push(u.backingFilename);\n      }\n      l.children[d] = a.children[c], delete a.children[c];\n    }\n    rmdir(e) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"rmdir\",\n        args: [e]\n      }, () => {\n        this._rmdirState(e);\n      });\n    }\n    _rmdirState(e) {\n      let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        o = t.pop(),\n        i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, t.join(\"/\"));\n      if (!Object.prototype.hasOwnProperty.call(i.children, o)) throw new p(\"ENOENT\", \"No such file or directory\");\n      let c = i.children[o];\n      if (c.type !== \"directory\") throw new p(\"ENOTDIR\", \"Not a directory\");\n      if (Object.keys(c.children).length > 0) throw new p(\"ENOTEMPTY\", \"Directory not empty\");\n      delete i.children[o];\n    }\n    truncate(e, t = 0) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e);\n      if (o.type !== \"file\") throw new p(\"EISDIR\", \"Is a directory\");\n      let i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(o.backingFilename);\n      if (!i) throw new p(\"ENOENT\", \"No such file or directory\");\n      i.truncate(t), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).add(i);\n    }\n    unlink(e) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"unlink\",\n        args: [e]\n      }, () => {\n        this._unlinkState(e, !0);\n      });\n    }\n    _unlinkState(e, t = !1) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        i = o.pop(),\n        c = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, o.join(\"/\"));\n      if (!Object.prototype.hasOwnProperty.call(c.children, i)) throw new p(\"ENOENT\", \"No such file or directory\");\n      let a = c.children[i];\n      if (a.type !== \"file\") throw new p(\"EISDIR\", \"Is a directory\");\n      if (delete c.children[i], t) {\n        let h = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(a.backingFilename);\n        h?.truncate(0), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).add(h), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, D).has(e) && ((0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, P).delete((0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, D).get(e)), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, D).delete(e));\n      }\n      this.state.pool.push(a.backingFilename);\n    }\n    utimes(e, t, o) {\n      (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, O).call(this, {\n        opp: \"utimes\",\n        args: [e, t, o]\n      }, () => {\n        this._utimesState(e, t, o);\n      });\n    }\n    _utimesState(e, t, o) {\n      let i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e);\n      i.lastModified = o;\n    }\n    writeFile(e, t, o) {\n      let i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        c = i.pop(),\n        a = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, i.join(\"/\"));\n      if (Object.prototype.hasOwnProperty.call(a.children, c)) {\n        let l = a.children[c];\n        l.lastModified = Date.now(), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, k).call(this, {\n          opp: \"setLastModified\",\n          args: [e, l.lastModified]\n        });\n      } else {\n        if (this.state.pool.length === 0) throw new Error(\"No more file handles available in the pool\");\n        let l = {\n          type: \"file\",\n          lastModified: Date.now(),\n          mode: o?.mode || T.FILE,\n          backingFilename: this.state.pool.pop()\n        };\n        a.children[c] = l, (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, k).call(this, {\n          opp: \"createFileNode\",\n          args: [e, l]\n        });\n      }\n      let h = a.children[c],\n        d = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(h.backingFilename);\n      t.length > 0 && (d.write(typeof t == \"string\" ? new TextEncoder().encode(t) : new Uint8Array(t), {\n        at: 0\n      }), e.startsWith(\"/pg_wal\") && (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).add(d));\n    }\n    _createFileNodeState(e, t) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n        i = o.pop(),\n        c = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, o.join(\"/\"));\n      c.children[i] = t;\n      let a = this.state.pool.indexOf(t.backingFilename);\n      return a > -1 && this.state.pool.splice(a, 1), t;\n    }\n    _setLastModifiedState(e, t) {\n      let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, e);\n      o.lastModified = t;\n    }\n    write(e, t, o, i, c) {\n      let a = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, I).call(this, e),\n        h = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, f).call(this, a);\n      if (h.type !== \"file\") throw new p(\"EISDIR\", \"Is a directory\");\n      let d = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).get(h.backingFilename);\n      if (!d) throw new p(\"EBADF\", \"Bad file descriptor\");\n      let l = d.write(new Uint8Array(t, o, i), {\n        at: c\n      });\n      return a.startsWith(\"/pg_wal\") && (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).add(d), l;\n    }\n  };\nH = new WeakMap(), v = new WeakMap(), F = new WeakMap(), M = new WeakMap(), y = new WeakMap(), b = new WeakMap(), m = new WeakMap(), x = new WeakMap(), P = new WeakMap(), D = new WeakMap(), S = new WeakMap(), n = new WeakSet(), C = async function () {\n  (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.g)(this, H, await navigator.storage.getDirectory()), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.g)(this, v, await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, j).call(this, this.dataDir, {\n    create: !0\n  })), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.g)(this, F, await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, j).call(this, G, {\n    from: (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, v),\n    create: !0\n  })), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.g)(this, M, await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, v).getFileHandle($, {\n    create: !0\n  })), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.g)(this, y, await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, M).createSyncAccessHandle());\n  let e = new ArrayBuffer((0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).getSize());\n  (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).read(e, {\n    at: 0\n  });\n  let t,\n    o = new TextDecoder().decode(e).split(`\n`),\n    i = !1;\n  try {\n    t = JSON.parse(o[0]);\n  } catch {\n    t = {\n      root: {\n        type: \"directory\",\n        lastModified: Date.now(),\n        mode: T.DIR,\n        children: {}\n      },\n      pool: []\n    }, (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).truncate(0), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).write(new TextEncoder().encode(JSON.stringify(t)), {\n      at: 0\n    }), i = !0;\n  }\n  this.state = t;\n  let c = o.slice(1).filter(Boolean).map(l => JSON.parse(l));\n  for (let l of c) {\n    let u = `_${l.opp}State`;\n    if (typeof this[u] == \"function\") try {\n      this[u].bind(this)(...l.args);\n    } catch (N) {\n      console.warn(\"Error applying OPFS AHP WAL entry\", l, N);\n    }\n  }\n  let a = [],\n    h = async l => {\n      if (l.type === \"file\") try {\n        let u = await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, F).getFileHandle(l.backingFilename),\n          N = await u.createSyncAccessHandle();\n        (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).set(l.backingFilename, u), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).set(l.backingFilename, N);\n      } catch (u) {\n        console.error(\"Error opening file handle for node\", l, u);\n      } else for (let u of Object.values(l.children)) a.push(h(u));\n    };\n  await h(this.state.root);\n  let d = [];\n  for (let l of this.state.pool) d.push(new Promise(async u => {\n    (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).has(l) && console.warn(\"File handle already exists for pool file\", l);\n    let N = await (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, F).getFileHandle(l),\n      U = await N.createSyncAccessHandle();\n    (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, b).set(l, N), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, m).set(l, U), u();\n  }));\n  await Promise.all([...a, ...d]), await this.maintainPool(i ? this.initialPoolSize : this.maintainedPoolSize);\n}, O = function (e, t) {\n  let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, k).call(this, e);\n  try {\n    t();\n  } catch (i) {\n    throw (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).truncate(o), i;\n  }\n}, k = function (e) {\n  let t = JSON.stringify(e),\n    o = new TextEncoder().encode(`\n${t}`),\n    i = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).getSize();\n  return (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y).write(o, {\n    at: i\n  }), (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, S).add((0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, y)), i;\n}, w = function (e) {\n  return e.split(\"/\").filter(Boolean);\n}, f = function (e, t) {\n  let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n    i = t || this.state.root;\n  for (let c of o) {\n    if (i.type !== \"directory\") throw new p(\"ENOTDIR\", \"Not a directory\");\n    if (!Object.prototype.hasOwnProperty.call(i.children, c)) throw new p(\"ENOENT\", \"No such file or directory\");\n    i = i.children[c];\n  }\n  return i;\n}, I = function (e) {\n  let t = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, P).get(e);\n  if (!t) throw new p(\"EBADF\", \"Bad file descriptor\");\n  return t;\n}, W = function () {\n  let e = ++(0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.i)(this, x)._;\n  for (; (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, P).has(e);) (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.i)(this, x)._++;\n  return e;\n}, j = async function (e, t) {\n  let o = (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.h)(this, n, w).call(this, e),\n    i = t?.from || (0,_chunk_BTBUZ646_js__WEBPACK_IMPORTED_MODULE_1__.e)(this, H);\n  for (let c of o) i = await i.getDirectoryHandle(c, {\n    create: t?.create\n  });\n  return i;\n};\nvar p = class extends Error {\n  constructor(A, e) {\n    super(e), typeof A == \"number\" ? this.code = A : typeof A == \"string\" && (this.code = _chunk_WGR4JCLS_js__WEBPACK_IMPORTED_MODULE_0__.g[A]);\n  }\n};\n\n\n//# sourceURL=webpack://pglitedemo/./node_modules/@electric-sql/pglite/dist/fs/opfs-ahp.js?");

/***/ })

};
